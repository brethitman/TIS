<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Inscripción Exámenes</title>
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <!-- Google Fonts - Roboto -->
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @keyframes float {
      0% { transform: translateY(0px); }
      50% { transform: translateY(-10px); }
      100% { transform: translateY(0px); }
    }
    @keyframes spinner-border {
      to { transform: rotate(360deg); }
    }
    .animate-movimiento {
      animation: float 3s ease-in-out infinite;
    }
    .spinner-border {
      display: inline-block;
      width: 1rem;
      height: 1rem;
      vertical-align: text-bottom;
      border: 0.2em solid currentColor;
      border-right-color: transparent;
      border-radius: 50%;
      animation: spinner-border .75s linear infinite;
    }
    .spinner-border-sm {
      width: 1rem;
      height: 1rem;
      border-width: 0.2em;
    }
  </style>
</head>
<body class="font-roboto bg-gray-50 overflow-x-hidden">
  <div class="max-w-4xl mx-auto px-4 relative">
    <!-- Header Banner -->
    <div class="bg-gradient-to-r from-red-600 via-purple-800 to-blue-600 py-6 mb-8 relative left-1/2 transform -translate-x-1/2 w-screen px-5 shadow-md">
      <h1 class="text-white m-0 font-bold text-2xl max-w-4xl mx-auto flex items-center tracking-wide">
        <i class="mr-4 text-xl"></i> INSCRIPCIÓN
      </h1>
    </div>

    <!-- Form -->
    <form (ngSubmit)="onSubmit()" #form="ngForm" class="mb-12">
      <!-- Sección 2: Exámenes de áreas seleccionadas -->
      <div class="bg-white mb-8 p-6 rounded-lg shadow-sm">
        <h2 class="text-xl font-bold mb-3 pb-2 border-b border-black text-black flex items-center">
          <i class="fas fa-tasks mr-3 text-purple-800"></i> Exámene(s) de la(s) área(s) seleccionada(s):
        </h2>
        <p class="text-gray-600 text-sm italic mb-6">Encuentra aquí la información sobre los exámenes de las áreas en las que te has inscrito.</p>
        
        <!-- Área de Informática -->
        <div class="border border-gray-300 rounded-lg mb-5 overflow-hidden shadow-sm hover:shadow-md transition-all duration-300">
          <h3 class="bg-gray-50 text-black text-center py-3 m-0 font-bold border-b border-gray-300 flex items-center justify-center">
            <i class="fas fa-laptop-code mr-2 text-purple-800"></i> INFORMÁTICA
          </h3>
          <div class="p-5">
            <div class="mb-4">
              <label class="flex items-center mb-2">
                <i class="fas fa-calendar-alt mr-2 text-blue-600"></i> Fecha y Hora
              </label>
              <div class="flex flex-wrap gap-4">
                <div class="flex items-center bg-gray-50 px-3 py-2 rounded-md">
                  <i class="fas fa-calendar-day mr-2 text-blue-600"></i>
                  <span>24/01/2025</span>
                </div>
                <div class="flex items-center bg-gray-50 px-3 py-2 rounded-md">
                  <i class="fas fa-clock mr-2 text-blue-600"></i>
                  <span>10:00 A.M.</span>
                </div>
              </div>
            </div>
            <div>
              <label class="flex items-center mb-2">
                <i class="fas fa-map-marker-alt mr-2 text-red-600"></i> Ubicación
              </label>
              <div class="flex flex-wrap items-center bg-gray-50 px-3 py-2 rounded-md">
                <i class="fas fa-building mr-2 text-red-600"></i>
                <span class="mr-4">Edificio Coordinación UMSA Laboratorio de Sistemas Informática</span>
                <a href="#" class="text-blue-600 no-underline text-sm flex items-center hover:underline ml-auto">
                  <i class="fas fa-map mr-1"></i> Mostrar mapa
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Sección 3: Área y Categoría -->
      <div class="bg-white mb-8 p-6 rounded-lg shadow-sm">
        <h2 class="text-xl font-bold mb-3 pb-2 border-b border-black text-black flex items-center">
          <i class="fas fa-layer-group mr-3 text-purple-800"></i> Seleccione Área y Categoría
        </h2>
        
        <div class="flex flex-wrap -mx-3 mb-4">
          <!-- Área -->
          <div class="w-full md:w-1/2 px-3 mb-4">
            <div class="mb-4">
              <label class="font-semibold text-black flex items-center after:content-['_*'] after:text-red-600">
                Área(s) a inscribir:
              </label>
              <select class="w-full px-4 py-2 border border-gray-300 rounded-md focus:border-purple-800 focus:ring-2 focus:ring-purple-200 transition"
                      [(ngModel)]="inscripcionForm.value.areaId" 
                      name="areaId" 
                      required
                      (change)="onAreaSeleccionada()"
                      #areaId="ngModel">
                <option value="">Seleccione un área</option>
                <option *ngFor="let area of areas" [value]="area.id">
                  {{ area.nombre_area }}
                </option>
              </select>
              <div *ngIf="areaId.invalid && (areaId.dirty || areaId.touched)" class="text-red-600 text-sm mt-1 flex items-center">
                <i class="fas fa-exclamation-circle mr-1"></i> Debe seleccionar un área
              </div>
            </div>
          </div>
          
          <!-- Categoría -->
          <div class="w-full md:w-1/2 px-3 mb-4">
            <div class="mb-4">
              <label class="font-semibold text-black flex items-center after:content-['_*'] after:text-red-600">
                Categoría(s) a inscribir:
              </label>
              <select class="w-full px-4 py-2 border border-gray-300 rounded-md focus:border-purple-800 focus:ring-2 focus:ring-purple-200 transition"
                      [(ngModel)]="inscripcionForm.value.nivelId" 
                      name="nivelId" 
                      required
                      (change)="onNivelSeleccionado()"
                      #nivelId="ngModel"
                      [disabled]="!inscripcionForm.value.areaId || cargandoNiveles">
                <option value="">Seleccione un nivel</option>
                <option *ngFor="let nivel of niveles" [value]="nivel.id">
                  {{ nivel.nombre_nivel }} ({{ nivel.costo }} Bs.)
                </option>
                <option *ngIf="niveles.length === 0 && !cargandoNiveles && inscripcionForm.value.areaId" value="" disabled>
                  No hay categorías disponibles para esta área
                </option>
                <option *ngIf="cargandoNiveles" value="" disabled>
                  Cargando categorías...
                </option>
              </select>
              <div *ngIf="nivelId.invalid && (nivelId.dirty || nivelId.touched)" class="text-red-600 text-sm mt-1 flex items-center">
                <i class="fas fa-exclamation-circle mr-1"></i> Debe seleccionar una categoría
              </div>
            </div>
          </div>
        </div>

        <!-- Información de la categoría seleccionada -->
        <div *ngIf="nivelSeleccionado" class="border border-gray-300 rounded-lg mt-6 p-5 shadow-sm">
          <h5 class="text-lg font-semibold text-black mb-4 flex items-center">
            <i class="fas fa-check-circle mr-2 text-purple-800"></i> {{ getNombreAreaSeleccionada() }} - {{ nivelSeleccionado.nombre_nivel }}
          </h5>
          <div class="flex flex-wrap -mx-3">
            <div class="w-full md:w-1/2 px-3 mb-3">
              <p class="flex items-center">
                <i class="fas fa-calendar-alt mr-2 text-gray-600"></i>
                <strong class="mr-1">Fecha examen:</strong> 
                {{ getFechaExamenFormateada() }}
              </p>
            </div>
            <div class="w-full md:w-1/2 px-3 mb-3">
              <p class="flex items-center">
                <i class="fas fa-coins mr-2 text-gray-600"></i>
                <strong class="mr-1">Costo:</strong> 
                {{ nivelSeleccionado.costo }} Bs. 
              </p>
            </div>
          </div>
          <p *ngIf="nivelSeleccionado.descripcion" class="flex items-start mt-2"> 
            <i class="fas fa-info-circle mr-2 text-gray-600 mt-1"></i> 
            {{ nivelSeleccionado.descripcion }} 
          </p>
        </div>

        <!-- Botón Agregar otra área -->
        <div class="text-center mt-6">
          <button type="button" class="bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded shadow-sm transition flex items-center mx-auto" (click)="agregarOtraArea()"> 
            <i class="fas fa-plus-circle mr-2"></i> Agregar otra área
          </button>
        </div>
      </div>

      <!-- Botón de envío -->
      <div class="text-center mt-8">
        <button type="submit" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg shadow-md transition flex items-center mx-auto" [disabled]="form.invalid || cargandoNiveles"> 
          <i class="fas fa-save mr-2"></i>
          <span *ngIf="!cargandoNiveles">Guardar Inscripción</span> 
          <span *ngIf="cargandoNiveles" class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> 
        </button>
      </div>
    </form>

    <!-- Footer -->
    <footer class="bg-blue-900 text-white px-5 py-8 flex flex-col md:flex-row justify-between items-center mt-12 w-screen relative left-1/2 transform -translate-x-1/2 shadow-md">
      <div class="mb-4 md:mb-0">
        <div class="text-xl font-bold mb-3 flex items-center justify-center md:justify-start">
          <i class="fas fa-headset mr-3"></i> Soporte
        </div>
        <a href="mailto:bluenebuladigitalsolutions@gmail.com" class="text-white hover:text-blue-200 no-underline text-base mb-2 flex items-center justify-center md:justify-start">
          <i class="fas fa-envelope mr-2 w-4"></i> bluenebuladigitalsolutionsgmail.com
        </a>
        <div class="text-base flex items-center justify-center md:justify-start">
          <i class="fas fa-phone-alt mr-2 w-4"></i> +591 79766695
        </div>
      </div>
      <div class="flex flex-row items-center mt-4 md:mt-0">
        <img src="icon/ciencia.png" alt="Logo Ciencia" class="max-w-[130px] h-auto z-10 mr-4 filter drop-shadow-lg animate-movimiento" />
        <img src="icon/atomo.png" alt="Logo Átomo" class="max-w-[130px] h-auto z-0 filter drop-shadow-lg animate-movimiento" />
      </div>
    </footer>
  </div>
</body>
</html>